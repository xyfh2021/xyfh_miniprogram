(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/page-component/app-goods-list/app-goods-list"],{"3f73":function(t,e,i){"use strict";i.r(e);var r=i("e7b5"),n=i("7919");for(var o in n)"default"!==o&&function(t){i.d(e,t,function(){return n[t]})}(o);i("a7f0");var a=i("2877"),s=Object(a["a"])(n["default"],r["a"],r["b"],!1,null,"243bf9ab",null);e["default"]=s.exports},7919:function(t,e,i){"use strict";i.r(e);var r=i("bc25"),n=i.n(r);for(var o in r)"default"!==o&&function(t){i.d(e,t,function(){return r[t]})}(o);e["default"]=n.a},a7f0:function(t,e,i){"use strict";var r=i("e355"),n=i.n(r);n.a},bc25:function(t,e,i){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(i("a34a")),n=i("2f62"),o=a(i("125c"));function a(t){return t&&t.__esModule?t:{default:t}}function s(t,e,i,r,n,o,a){try{var s=t[o](a),u=s.value}catch(p){return void i(p)}s.done?e(u):Promise.resolve(u).then(r,n)}function u(t){return function(){var e=this,i=arguments;return new Promise(function(r,n){var o=t.apply(e,i);function a(t){s(o,r,n,a,u,"next",t)}function u(t){s(o,r,n,a,u,"throw",t)}a(void 0)})}}function p(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function c(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?p(i,!0).forEach(function(e){l(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):p(i).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function l(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var d=function(){return i.e("components/page-component/goods/app-price").then(i.bind(null,"6c9f"))},h=function(){return i.e("components/page-component/app-attr/app-attr").then(i.bind(null,"d3c4"))},f=function(){return i.e("components/page-component/app-pt-attr/app-pt-attr").then(i.bind(null,"051f"))},g=function(){return i.e("components/page-component/app-member-mark/app-member-price").then(i.bind(null,"dd88"))},_=function(){return i.e("components/page-component/app-sup-vip/app-sup-vip").then(i.bind(null,"348c"))},m=function(){return i.e("components/basic-component/app-iphone-x/app-iphone-x").then(i.bind(null,"7598"))},b={name:"app-goods-list",components:{"app-price":d,"app-attr":h,"app-pt-attr":f,"app-member-price":g,"app-sup-vip":_,"app-iphone-x":m},props:{listStyle:{type:String,default:function(){return"2"}},list:Array,previewUrl:String,submitUrl:String,theme:String,is_show_member:{type:Boolean,default:function(){return!0}},sign:String,detail:Object},data:function(){return{show:0,buyText:"立即购买",detail_sign:"",goods_id:"",cartShow:1,plugin:"",goods_list:[],buyBool:!1,cur_index:0,item:null,show_pt:!1,pt:!0,loading:!1,selectAttr:{},appAttr:{},attrGroup:[],selectGroupAttrId:-1}},computed:c({},(0,n.mapState)({appImg:function(t){return t.mallConfig.__wxapp_img.mall},appSetting:function(t){return t.mallConfig.mall.setting},isShowCart:function(t){return t.mallConfig.mall.setting.is_show_cart},isShowGoodsName:function(t){return t.mallConfig.mall.setting.is_show_goods_name}}),{},(0,n.mapGetters)("mallConfig",{getVideo:"getVideo"}),{listClass:function(){return 3==this.listStyle?"list-style-3 dir-left-wrap":2==this.listStyle?"list-style-2 dir-left-wrap":""}}),watch:{appAttr:{handler:function(t){"none"===t.display&&(this.show_pt=!1)}}},methods:{setGroupAttrID:function(t){this.selectGroupAttrId=t,this.selectAttr={},this.request_pt(t)},multiplayer:function(){var e=this;if(e.pt){if(console.log(e.selectAttr),e.selectAttr&&0===Object.keys(e.selectAttr).length)t.showToast({title:"请选择规格",icon:"none"});else if(e.selectAttr&&Object.keys(e.selectAttr).length>0){for(var i=e.item.mch_id,r=[],n={id:e.item.id,attr:[],num:e.appAttr.number,goods_attr_id:e.selectAttr.id,cart_id:0},o=0;o<e.selectAttr.attr_list.length;o++){var a={attr_id:e.selectAttr.attr_list[o].attr_id,attr_group_id:e.selectAttr.attr_list[o].attr_group_id};n.attr.push(a)}r.push({mch_id:i,pintuan_order_id:0,pintuan_group_id:e.selectGroupAttrId,goods_list:[n]}),t.navigateTo({url:"/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify(r),"&preview_url=").concat(encodeURIComponent(e.$api.pt.order_preview),"&submit_url=").concat(encodeURIComponent(e.$api.pt.order_submit),"&order_page_url=/plugins/pt/order/order&plugin=pt")})}}else{e.selectAttr={},e.pt=!0,e.request_pt(e.selectGroupAttrId);var s=setInterval(function(){if(e.loading)return clearInterval(s),void(1==e.item.pintuan_groups.length&&e.multiplayer())},500)}},buyClick:function(t){(0,o.default)(t,this.detail_sign,this,this.goods_list[this.cur_index])},attr:function(t){this.appAttr=t},specification:function(t){var e=this;switch(this.goods_id=t.id,this.detail_sign=t.sign,"pintuan"!=this.detail_sign&&(this.item=t,this.attrGroup=t.attr_groups,this.show=Math.random()),this.detail_sign){case"advance":this.cartShow=0,this.buyText="支付定金",this.buyBool=!0;break;case"booking":this.cartShow=0,this.buyText="立即预约",this.plugin="booking";break;case"pintuan":this.$request({url:this.$api.pt.detail,data:{id:this.goods_id,group_id:0}}).then(function(t){e.item=t.data.detail,e.selectGroupAttrId=e.item.pintuan_groups[0].id,e.attrGroup=e.item.attr_groups,e.show=Math.random(),e.show_pt=!0,e.request_pt(e.selectGroupAttrId)});break;case"integral_mall":this.cartShow=0,this.buyText="立即兑换";break;case"step":this.cartShow=0,this.buyText="立即兑换";break;case"gift":this.cartShow=0,this.buyBool=!0,this.buyText="加入礼包";break;default:break}},request_pt:function(){var e=u(r.default.mark(function e(i){var n;return r.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,this.loading=!1,t.showLoading(),e.next=5,this.$request({url:this.$api.pt.detail,data:{id:this.goods_id,group_id:i}});case 5:n=e.sent,0===n.code&&(t.hideLoading(),this.item=n.data.detail,this.attrGroup=this.item.attr_groups,this.loading=!0),e.next=12;break;case 9:throw e.prev=9,e.t0=e["catch"](0),new Error(e.t0);case 12:case"end":return e.stop()}},e,this,[[0,9]])}));function i(t){return e.apply(this,arguments)}return i}(),buy:function(){var e=this.item,i=this.appAttr.number,r=this.selectAttr,n=r.id,o=[];for(var a in r.attr_list)o.push({attr_id:r.attr_list[a].attr_id,attr_group_id:r.attr_list[a].attr_group_id});var s=[],u={mch_id:e.mch_id?e.mch_id:0,goods_list:[]};u.goods_list.push({id:e.id,attr:o,num:i,cat_id:0,goods_attr_id:n}),s.push(u),t.navigateTo({url:"/pages/order-submit/order-submit?mch_list="+JSON.stringify(s)})},individual:function(){var e=this;e.pt&&(e.pt=!1,e.selectAttr={},e.request_pt(0));var i=setInterval(function(){if(e.loading)return clearInterval(i),void(0===Object.keys(e.selectAttr).length?t.showToast({title:"请选择规格",icon:"none"}):e.buy())},500)},jump:function(e){e.video_url&&1==this.getVideo?t.navigateTo({url:"/pages/goods/video?goods_id=".concat(e.id,"&sign=").concat(e.sign)}):t.navigateTo({url:e.page_url})},onAttr:function(t){this.selectAttr=null!==t?t:{}}},created:function(){}};e.default=b}).call(this,i("543d")["default"])},e355:function(t,e,i){},e7b5:function(t,e,i){"use strict";var r=function(){var t=this,e=t.$createElement;t._self._c},n=[];i.d(e,"a",function(){return r}),i.d(e,"b",function(){return n})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/page-component/app-goods-list/app-goods-list-create-component',
    {
        'components/page-component/app-goods-list/app-goods-list-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("3f73"))
        })
    },
    [['components/page-component/app-goods-list/app-goods-list-create-component']]
]);                
