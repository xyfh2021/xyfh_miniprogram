(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/flash_sale/goods/goods"],{3749:function(t,e,n){"use strict";var i=n("ce91"),a=n.n(i);a.a},"67ca":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=(t._self._c,Number(110)),i=t._f("getStart")(t.activity.start_at),a=t._f("getStartT")(t.activity.start_at);t.$mp.data=Object.assign({},{$root:{m0:n,f0:i,f1:a}})},a=[];n.d(e,"a",function(){return i}),n.d(e,"b",function(){return a})},ce91:function(t,e,n){},d2a1:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=o(n("a34a")),a=n("2f62");function o(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n,i,a,o,r){try{var s=t[o](r),p=s.value}catch(c){return void n(c)}s.done?e(p):Promise.resolve(p).then(i,a)}function s(t){return function(){var e=this,n=arguments;return new Promise(function(i,a){var o=t.apply(e,n);function s(t){r(o,i,a,s,p,"next",t)}function p(t){r(o,i,a,s,p,"throw",t)}s(void 0)})}}function p(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,i)}return n}function c(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?p(n,!0).forEach(function(e){u(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):p(n).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function u(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var l=function(){return n.e("components/page-component/goods/app-goods-banner").then(n.bind(null,"12b6"))},d=function(){return n.e("components/page-component/goods/app-goods-price").then(n.bind(null,"e525"))},h=function(){return n.e("components/page-component/app-attr/app-attr").then(n.bind(null,"d3c4"))},f=function(){return n.e("components/page-component/goods/app-goods-attr").then(n.bind(null,"9dc1"))},g=function(){return n.e("components/page-component/app-related-suggestion-product/app-related-suggestion-product").then(n.bind(null,"1ce4"))},m=function(){return n.e("components/page-component/goods/app-goods-service").then(n.bind(null,"311c"))},_=function(){return n.e("components/page-component/goods/app-goods-marketing").then(n.bind(null,"1143"))},v=function(){return n.e("components/page-component/app-join-member/app-join-member").then(n.bind(null,"40f4"))},b=function(){return n.e("components/page-component/goods/app-goods-detail").then(n.bind(null,"5abf"))},y=function(){return n.e("components/page-component/app-iphonex-bottom/app-iphonex-bottom").then(n.bind(null,"bc3b"))},w=function(){return n.e("components/basic-component/app-iphone-x/app-iphone-x").then(n.bind(null,"7598"))},O=function(){return n.e("components/basic-component/app-empty-bottom/app-empty-bottom").then(n.bind(null,"0c06"))},j=function(){return n.e("components/page-component/app-vip-card/app-vip-card").then(n.bind(null,"19f0"))},x={name:"goods",data:function(){return{goods_id:-1,detail:{},activity:{},activity_status:0,time_str:{day:0,hou:0,min:0,sec:0},timing:null,discount:null,is_vip:!1,is_vip_card_user:0,shareData:null,poster_config:this.$api.flash_sale.poster_config,poster_generate:this.$api.flash_sale.poster_generate,selectAttr:null,url:"",show:!1,list:[],miaosha_buy_count:0,appAttr:{},is_activity:0,loading:!1,is_show_buy:!0,share:!1}},onLoad:function(t){this.goods_id=t.id,this.share=t.share},onShow:function(){},onHide:function(){clearInterval(this.timing)},onUnload:function(){clearInterval(this.timing)},computed:c({},(0,a.mapGetters)("mallConfig",{getTheme:"getTheme"})),onShareAppMessage:function(){return this.$shareAppMessage({path:"/plugins/flash_sale/goods/goods",title:this.detail.app_share_title?this.detail.app_share_title:this.detail.name,imageUrl:this.detail.app_share_pic?this.detail.app_share_pic:"",params:{id:this.detail.id,share:!0}})},methods:{getDetail:function(){var e=s(i.default.mark(function e(){var n,a,o,r,s;return i.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.loading=!1,e.next=3,this.$request({url:this.$api.flash_sale.detail,data:{id:this.goods_id}});case 3:n=e.sent,0===n.code?(this.loading=!0,a=n.data,o=a.detail,r=a.activity,s=a.activity_status,this.detail=o,this.activity=r,this.activity_status=s,o.vip_card_appoint.discount>0&&(this.is_vip=!0,this.discount=o.vip_card_appoint.discount),this.is_vip_card_user=o.vip_card_appoint.is_vip_card_user,1===s?this.set_time(r.end_at):0===s&&(this.set_time(r.start_at),this.is_show_buy=!1)):(t.showToast({title:n.msg,icon:"none"}),this.share?t.navigateTo({url:"/plugins/flash_sale/index/index"}):t.navigateBack());case 5:case"end":return e.stop()}},e,this)}));function n(){return e.apply(this,arguments)}return n}(),set_time:function(t){var e=this;clearInterval(this.timing);var n=new Date(t.replace(/-/g,"/"));this.now_time(n),this.timing=setInterval(function(){e.now_time(n)},1e3)},now_time:function(t){var e=t.getTime()-(new Date).getTime();e<0&&clearInterval(this.timing);var n=parseInt(e/1e3/60/60/24),i=parseInt(e/1e3/60/60%24),a=parseInt(e/1e3/60%60),o=parseInt(e/1e3%60);this.time_str.day=n<10?"0"+n:n,this.time_str.hou=i<10?"0"+i:i,this.time_str.min=a<10?"0"+a:a,this.time_str.sec=o<10?"0"+o:o},quickShare:function(t){this.shareData=t},attr:function(t){this.appAttr=t},request:function(){var t=s(i.default.mark(function t(e){var n,a,o;return i.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return n=e.url,a=e.data,t.next=3,this.$request({url:n,data:a});case 3:if(o=t.sent,0!==o.code){t.next=6;break}return t.abrupt("return",o.data);case 6:case"end":return t.stop()}},t,this)}));function e(e){return t.apply(this,arguments)}return e}(),attrtap:function(t){this.selectAttr=null!==t?t:null},joinCart:function(){this.show=Math.random()},buy:function(){if("none"===this.appAttr.display)this.show=Math.random();else{for(var t=this.detail.mch_id,e=[],n={id:this.detail.id,attr:[],num:this.appAttr.number,goods_attr_id:this.selectAttr.id,cart_id:0},i=0;i<this.selectAttr.attr_list.length;i++){var a={attr_id:this.selectAttr.attr_list[i].attr_id,attr_group_id:this.selectAttr.attr_list[i].attr_group_id};n.attr.push(a)}e.push({mch_id:t,goods_list:[n]}),this.$jump({open_type:"navigate",url:"/pages/order-submit/order-submit?mch_list=".concat(JSON.stringify(e))})}}},watch:{goods_id:{handler:function(){this.getDetail()}}},filters:{getStart:function(t){if(t){var e=new Date(t.replace(/-/g,"/"));return"".concat(e.getHours()<10?"0"+e.getHours():e.getHours(),":").concat(e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes()," 开抢 ")}},getStartT:function(t){if(t){var e=new Date(t.replace(/-/g,"/"));return"".concat(e.getFullYear(),".").concat(e.getMonth()+1,".").concat(e.getDate())}}},components:{"app-banner":l,"app-attr":h,"app-goods-attr":f,"app-related-suggestion-product":g,"app-goods-service":m,"app-goods-marketing":_,"app-join-member":v,"app-goods-detail":b,"app-iphone-bottom":y,"app-iphone-x":w,"app-empty-bottom":O,"app-vip-card":j,"app-goods-price":d}};e.default=x}).call(this,n("543d")["default"])},da87:function(t,e,n){"use strict";n.r(e);var i=n("d2a1"),a=n.n(i);for(var o in i)"default"!==o&&function(t){n.d(e,t,function(){return i[t]})}(o);e["default"]=a.a},f3ed:function(t,e,n){"use strict";n.r(e);var i=n("67ca"),a=n("da87");for(var o in a)"default"!==o&&function(t){n.d(e,t,function(){return a[t]})}(o);n("3749");var r=n("2877"),s=Object(r["a"])(a["default"],i["a"],i["b"],!1,null,"26dc4538",null);e["default"]=s.exports}},[["25b4","common/runtime","common/vendor"]]]);