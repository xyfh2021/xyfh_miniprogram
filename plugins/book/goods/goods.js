(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/book/goods/goods"],{"57f4":function(t,n,e){"use strict";var o=e("6b01"),i=e.n(o);i.a},"6b01":function(t,n,e){},"82f3":function(t,n,e){"use strict";e.r(n);var o=e("9fe9"),i=e.n(o);for(var r in o)"default"!==r&&function(t){e.d(n,t,function(){return o[t]})}(r);n["default"]=i.a},"91f4":function(t,n,e){"use strict";e.r(n);var o=e("dac8"),i=e("82f3");for(var r in i)"default"!==r&&function(t){e.d(n,t,function(){return i[t]})}(r);e("57f4");var a=e("2877"),p=Object(a["a"])(i["default"],o["a"],o["b"],!1,null,"7b7a9dfc",null);n["default"]=p.exports},"9fe9":function(t,n,e){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var o=r(e("a34a")),i=e("2f62");function r(t){return t&&t.__esModule?t:{default:t}}function a(t,n){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);n&&(o=o.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),e.push.apply(e,o)}return e}function p(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{};n%2?a(e,!0).forEach(function(n){s(t,n,e[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(e).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))})}return t}function s(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(t,n){return l(t)||d(t,n)||u()}function u(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}function d(t,n){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var e=[],o=!0,i=!1,r=void 0;try{for(var a,p=t[Symbol.iterator]();!(o=(a=p.next()).done);o=!0)if(e.push(a.value),n&&e.length===n)break}catch(s){i=!0,r=s}finally{try{o||null==p["return"]||p["return"]()}finally{if(i)throw r}}return e}}function l(t){if(Array.isArray(t))return t}function f(t,n,e,o,i,r,a){try{var p=t[r](a),s=p.value}catch(c){return void e(c)}p.done?n(s):Promise.resolve(s).then(o,i)}function g(t){return function(){var n=this,e=arguments;return new Promise(function(o,i){var r=t.apply(n,e);function a(t){f(r,o,i,a,p,"next",t)}function p(t){f(r,o,i,a,p,"throw",t)}a(void 0)})}}function h(t){return v(t)||b(t)||m()}function m(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function b(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}function v(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}var _=function(){return e.e("components/page-component/goods/app-goods-banner").then(e.bind(null,"12b6"))},y=function(){return e.e("components/page-component/goods/app-goods-price").then(e.bind(null,"e525"))},w=function(){return e.e("components/page-component/goods/app-goods-attr").then(e.bind(null,"9dc1"))},O=function(){return e.e("components/page-component/app-attr/app-attr").then(e.bind(null,"d3c4"))},k=function(){return e.e("plugins/book/components/app-store").then(e.bind(null,"f09e"))},j=function(){return e.e("components/page-component/app-related-suggestion-product/app-related-suggestion-product").then(e.bind(null,"1ce4"))},x=function(){return e.e("components/page-component/goods/app-goods-detail").then(e.bind(null,"5abf"))},$=function(){return e.e("components/page-component/app-quick-navigation/app-quick-navigation").then(e.bind(null,"4d92"))},A=function(){return e.e("components/page-component/app-iphonex-bottom/app-iphonex-bottom").then(e.bind(null,"bc3b"))},P=function(){return e.e("components/basic-component/app-iphone-x/app-iphone-x").then(e.bind(null,"7598"))},S=function(){return e.e("components/page-component/goods/app-goods-service").then(e.bind(null,"311c"))},q=function(){return e.e("components/page-component/app-vip-card/app-vip-card").then(e.bind(null,"19f0"))},E=function(){return e.e("components/page-component/app-goods-detail/app-name").then(e.bind(null,"1caa"))},M=function(){return e.e("components/basic-component/app-empty-bottom/app-empty-bottom").then(e.bind(null,"0c06"))},T=function(){return e.e("components/page-component/goods/app-goods-marketing").then(e.bind(null,"1143"))},C={name:"details",components:{"app-goods-banner":_,"app-goods-price":y,"app-goods-attr":w,"app-attr":O,"app-store":k,"app-related-suggestion-product":j,"app-goods-detail":x,"app-quick-navigation":$,"app-iphone-bottom":A,"app-iphone-x":P,"app-goods-service":S,"app-name":E,"app-vip-card":q,"app-empty-bottom":M,"app-goods-marketing":T},data:function(){return{item:null,selectAttr:{},activeIndex:0,list:[],submitUrl:this.$api.book.order_submit,previewUrl:this.$api.book.order_preview,url:"",cartShow:!1,isCart:!1,is_vip:!1,is_vip_card_user:0,discount:null,show:0,loading:!1,goods_id:0,poster_config:this.$api.book.poster_config,poster_generate:this.$api.book.poster_generate}},onShareAppMessage:function(){return console.log(this.item),this.$shareAppMessage({path:"/plugins/book/goods/goods",title:this.item.app_share_title?this.item.app_share_title:this.item.name,imageUrl:this.item.app_share_pic?this.item.app_share_pic:"",params:{goods_id:this.item.goods_id}})},onLoad:function(t){this.goods_id=t.goods_id,this.request(t.goods_id),this.requestFun(t.goods_id)},methods:{attrtap:function(t){this.selectAttr=null!==t?t:{}},requestFun:function(t){var n=this;this.$request({url:this.$api.goods.new_recommend,data:{goods_id:t,page:1}}).then(function(t){0===t.code&&(t.data.list.length>0?n.list=[].concat(h(n.list),h(t.data.list)):n.over=!0)})},reservationNow:function(){this.show=Math.random()},request:function(){var n=g(o.default.mark(function n(e){var i,r,a,p,s,u;return o.default.wrap(function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,t.getLocation({type:"wgs84"});case 2:if(i=n.sent,r=c(i,2),a=r[0],p=r[1],a&&t.showToast({title:"请开启位置权限",icon:"none",duration:1e3,success:function(){t.navigateBack()}}),console.log(e),console.log(p),!p){n.next=14;break}return n.next=12,this.$request({url:this.$api.book.detail,data:{goods_id:e,latitude:p.latitude,longitude:p.longitude}});case 12:s=n.sent,0===s.code&&(u=s.data.list,this.item=u,this.url="".concat(this.$api.book.poster,"&goods_id=").concat(u.goods_id),this.poster_config="".concat(this.poster_config,"&goods_id=").concat(u.goods_id),this.poster_generate="".concat(this.poster_generate,"&goods_id=").concat(u.goods_id),this.loading=!0,u.vip_card_appoint.discount>0&&(this.is_vip=!0,this.discount=u.vip_card_appoint.discount),this.is_vip_card_user=u.vip_card_appoint.is_vip_card_user);case 14:case"end":return n.stop()}},n,this)}));function e(t){return n.apply(this,arguments)}return e}()},computed:p({},(0,i.mapState)({mall:function(t){return t.mallConfig.mall}}),{},(0,i.mapState)("gConfig",{iphone:function(t){return t.iphone},iphoneHeight:function(t){return t.iphoneHeight}}),{},(0,i.mapGetters)("mallConfig",{getTheme:"getTheme"}))};n.default=C}).call(this,e("543d")["default"])},dac8:function(t,n,e){"use strict";var o=function(){var t=this,n=t.$createElement,e=(t._self._c,Number(110));t.$mp.data=Object.assign({},{$root:{m0:e}})},i=[];e.d(n,"a",function(){return o}),e.d(n,"b",function(){return i})}},[["6577","common/runtime","common/vendor"]]]);