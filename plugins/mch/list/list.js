(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["plugins/mch/list/list"],{2538:function(t,o,e){},4227:function(t,o,e){"use strict";(function(t){Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var n=e("2f62");function a(t,o){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);o&&(n=n.filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable})),e.push.apply(e,n)}return e}function i(t){for(var o=1;o<arguments.length;o++){var e=null!=arguments[o]?arguments[o]:{};o%2?a(e,!0).forEach(function(o){c(t,o,e[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):a(e).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(e,o))})}return t}function c(t,o,e){return o in t?Object.defineProperty(t,o,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[o]=e,t}var r=function(){return e.e("components/page-component/app-good-shop-recommendation/app-good-shop-recommendation").then(e.bind(null,"3da2"))},s={name:"list",components:{appGoodShopRecommendation:r},data:function(){return{catModel:!1,toSearch:!1,list:[],cat_list:[],page:1,keyword:"",mch_common_cat_id:0,load:!1,args:!1,latitude:0,longitude:0,page_loading:!1,getFocus:!1}},onLoad:function(t){this.getLocation(),this.getCats()},onReachBottom:function(){var t=this;if(!t.args&&!t.load){t.load=!0;var o=t.page+1;t.$request({url:t.$api.mch.index,data:{keyword:t.keyword,latitude:t.latitude,longitude:t.longitude,mch_common_cat_id:t.mch_common_cat_id,page:o}}).then(function(e){if(0===e.code){var n=[o,0===e.data.list.length,t.list.concat(t.dataMap(e.data.list))];t.page=n[0],t.args=n[1],t.list=n[2]}t.load=!1})}},onShareAppMessage:function(t){return this.$shareAppMessage({title:"好店推荐",path:"/plugins/mch/list/list",params:{}})},methods:{dataMap:function(t){if(t)return t.forEach(function(t){t.pic_url=t.store.cover_url,t.name=t.store.name,t.goods_num=t.goods_count,t.order_num=t.order_goods_count,t.goodsList=t.goods,t.goodsList.forEach(function(t){t.picUrl=t.goodsWarehouse.cover_pic})}),t},getLocation:function(){var o=this;t.getLocation({type:"wgs84",success:function(t){var e=[t.latitude,t.longitude];o.latitude=e[0],o.longitude=e[1]},fail:function(t){console.warn(t)},complete:function(t){o.loadData()}})},loadData:function(){var t=this;t.$showLoading(),t.$request({url:t.$api.mch.index,data:{keyword:t.keyword,latitude:t.latitude,longitude:t.longitude,mch_common_cat_id:t.mch_common_cat_id}}).then(function(o){t.$hideLoading(),0===o.code&&(t.list=t.dataMap(o.data.list),console.log(t.list))}).catch(function(o){t.$hideLoading()})},getCats:function(){var t=this;t.$request({url:t.$api.mch.category}).then(function(o){t.cat_list=o.data.list})},navShop:function(o){t.navigateTo({url:"/plugins/mch/shop/shop?mch_id="+o})},navGoods:function(o,e){t.navigateTo({url:"/plugins/mch/goods/goods?id="+e+"&mch_id="+o})},beSearch:function(t){0===this.keyword.length&&(this.toSearch=!this.toSearch,this.getFocus=this.toSearch)},bindConfirm:function(){var t=[1,0,!1,[]];this.page=t[0],this.mch_common_cat_id=t[1],this.catModel=t[2],this.list=t[3],this.loadData()},cat:function(t){var o=[t,[],1,!1];this.mch_common_cat_id=o[0],this.list=o[1],this.page=o[2],this.catModel=o[3],this.loadData()},changeCat:function(){this.catModel=!this.catModel},bindInput:function(t){this.keyword=t.detail.value},cancelPrint:function(){this.keyword="",this.toSearch=!1,this.bindConfirm()}},computed:i({},(0,n.mapGetters)("mallConfig",{getTheme:"getTheme"}))};o.default=s}).call(this,e("543d")["default"])},"4e44":function(t,o,e){"use strict";e.r(o);var n=e("4227"),a=e.n(n);for(var i in n)"default"!==i&&function(t){e.d(o,t,function(){return n[t]})}(i);o["default"]=a.a},"51ed":function(t,o,e){"use strict";var n=e("2538"),a=e.n(n);a.a},"7ba4":function(t,o,e){"use strict";e.r(o);var n=e("d143"),a=e("4e44");for(var i in a)"default"!==i&&function(t){e.d(o,t,function(){return a[t]})}(i);e("51ed");var c=e("2877"),r=Object(c["a"])(a["default"],n["a"],n["b"],!1,null,"7dd81cac",null);o["default"]=r.exports},d143:function(t,o,e){"use strict";var n=function(){var t=this,o=t.$createElement;t._self._c},a=[];e.d(o,"a",function(){return n}),e.d(o,"b",function(){return a})}},[["8295","common/runtime","common/vendor"]]]);